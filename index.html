<!doctype html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/css/reset.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.css">
    <script src="https://cdn.mxpnl.com/libs/mixpanel-platform/build/mixpanel-platform.v0.latest.min.js"></script>
  </head>
  <body class="mixpanel-platform-body">
    <div class="mixpanel-platform-section">
      <div id="eventSelect" style="float: left;"></div>
      <div id="by" class="mixpanel-platform-label" style="margin-left: 10px; display: none;">by</div>
      <div id="propSelect" style="float: left;"></div>
      <div id="dateSelect" style="float: right;"></div>
      <div style="clear: both;"></div>
      <div id="graph"></div>
    </div>
    <div id="table"></div>
    <script>
    //IN ORDER TO EASILY EDIT THIS CHART, FOLLOW DIRECTIONS FROM ALL THE COMMENTS THAT START WITH '[EDIT CHART]'
    
     MP.api.ready(function() {
        /*  First Chart */
        
            //[EDIT CHART] (Optional, not necessarily recommened as this will add more work) - You can change the API that you get data from from events to Segmentation, Retention, etc
      
      //[EDIT CHART] (Optional) - If you want to edit the events that get posted in a given chart, edit the event names here. You can add event names or custom event names as strings before the dictionary property, you can delete event names or you can change the events that are presented.
  
      
        var first_chart = MP.api.events('Viewed docs', 'Blog - Post Viewed', '$custom_event:74981',
            //[EDIT CHART] (Optional) - you can change parameters here.
            // e.g. change type from average to unique, change unit from month to day, etc. 
            //documentation shows all parameters that can be changed for MP.api.events
                {
                  type: 'average',     
                  unit: 'month',     
                  interval: 5        
                } 
              );
        
      
     
        var second_chart = MP.api.events('$custom_event:290234', {
    type: 'average',     
    unit: 'month',     
    interval: 5        
      } );
       
       //[EDIT CHART] - If you want to add additional charts, you can uncomment one of the below or add your own variable name here - it needs to equal a call to some endpoint like MP.api.charts() and needs to follow the above format.
       
       /*
        var third_chart = MP.api.events('Character Created', 'Session End', {
            from: moment().subtract(1, 'months'),
            unit: 'day'
        });
        
        var fourth_chart = MP.api.events('Tutorial Exited', 'Registration Complete', {
            from: moment().subtract(2, 'months'),
            unit: 'day'
        });
        */
        
        
        $.when(first_chart, second_chart).done(function(first_chart, second_chart){ //, second_chart, third_chart, fourth_chart).done(function(first_chart, second_chart, third_chart, fourth_chart) {
            
           
            
            var drawGraph = function(firstChartData, secondChartData){  //, secondChartData, thirdChartData, fourthChartData){
          
                $('<div class="first"></div>').css({'width':'460px', 'float':'left'}).appendTo('body').MPChart({
                    chartType: 'line',
                    data: firstChartData
                });
                
                $('<div class="second"></div>').css({'width':'460px', 'float':'right'}).appendTo('body').MPChart({
                    chartType: 'line',
                    data: secondChartData
                });
                
                // $('<div class="third"></div>').css({'width':'460px', 'float':'left'}).appendTo('body').MPChart({
                //     chartType: 'pie',
                //     data: thirdChartData
                // });
                
                // $('<div class="fourth"></div>').css({'width':'460px', 'float':'right'}).appendTo('body').MPChart({
                //     chartType: 'bar',
                //     data: fourthChartData
                // });
                $('.mixpanel-platform-multi_selector').css({'clear':'both'});
                $('.title').css({'width':'55px'});
                $('.color_toggle_dropdown').each(function(){this.style.setProperty('width', '170px', 'important')});
                $('.title').each(function(){this.style.setProperty('width', '105px', 'important')});
                
            }
            
            
            drawGraph(first_chart.values(), second_chart.values()); //, second_chart.values(), third_chart.values(), fourth_chart.values());
            
        });
     });
    </script>
  </body>
</html>